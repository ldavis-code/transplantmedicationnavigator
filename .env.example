# Neon Database Connection
# Get your connection string from: https://console.neon.tech
# Format: postgresql://user:password@host/database?sslmode=require
DATABASE_URL=postgresql://username:password@ep-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require

# Anthropic API Key (for Claude AI chatbot)
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-your-key-here

# Epic FHIR Integration (for MyChart medication import)
# Register your app at: https://fhir.epic.com/Developer/Apps
#
# ── SANDBOX (testing with Epic's test patients) ──
# EPIC_FHIR_BASE_URL=https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4
#
# ── PRODUCTION (real health systems) ──
# Use your health system's FHIR endpoint. Epic's "request is invalid" error
# usually means one of these doesn't match your app registration:
#   1. EPIC_CLIENT_ID - must be the non-sandbox client ID from App Orchard
#   2. EPIC_REDIRECT_URI - must EXACTLY match what's in your Epic app config
#      (no trailing slash differences, must include /auth/epic/callback)
#   3. EPIC_SCOPES - every scope must be enabled in your Epic app registration
#   4. EPIC_FHIR_BASE_URL - must match the aud value your app is registered for
#
# The authorize and token endpoints are auto-discovered via SMART on FHIR
# .well-known/smart-configuration. You only need to set them manually if
# your FHIR server doesn't support SMART discovery.
#
EPIC_CLIENT_ID=your-epic-client-id
EPIC_REDIRECT_URI=https://transplantmedicationnavigator.com/auth/epic/callback
EPIC_FHIR_BASE_URL=https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4
# Optional: Override auto-discovered OAuth endpoints
# EPIC_AUTHORIZE_URL=https://fhir.epic.com/interconnect-fhir-oauth/oauth2/authorize
# EPIC_TOKEN_URL=https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token
# Optional: Override scopes (must match EXACTLY what is enabled in your Epic app registration)
# Epic rejects the ENTIRE request if ANY scope is not registered for your app.
# EPIC_SCOPES=patient/MedicationRequest.read patient/Patient.read
